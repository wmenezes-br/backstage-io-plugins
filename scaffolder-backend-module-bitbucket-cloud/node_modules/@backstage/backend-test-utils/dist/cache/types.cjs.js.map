{"version":3,"file":"types.cjs.js","sources":["../../src/cache/types.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Keyv from 'keyv';\nimport { getDockerImageForName } from '../util/getDockerImageForName';\n\n/**\n * The possible caches to test against.\n *\n * @public\n */\nexport type TestCacheId = 'MEMORY' | 'REDIS_7' | 'MEMCACHED_1';\n\nexport type TestCacheProperties = {\n  name: string;\n  store: string;\n  dockerImageName?: string;\n  connectionStringEnvironmentVariableName?: string;\n};\n\nexport type Instance = {\n  store: string;\n  connection: string;\n  keyv: Keyv;\n  stop: () => Promise<void>;\n};\n\nexport const allCaches: Record<TestCacheId, TestCacheProperties> =\n  Object.freeze({\n    REDIS_7: {\n      name: 'Redis 7.x',\n      store: 'redis',\n      dockerImageName: getDockerImageForName('redis:7'),\n      connectionStringEnvironmentVariableName:\n        'BACKSTAGE_TEST_CACHE_REDIS7_CONNECTION_STRING',\n    },\n    MEMCACHED_1: {\n      name: 'Memcached 1.x',\n      store: 'memcache',\n      dockerImageName: getDockerImageForName('memcached:1'),\n      connectionStringEnvironmentVariableName:\n        'BACKSTAGE_TEST_CACHE_MEMCACHED1_CONNECTION_STRING',\n    },\n    MEMORY: {\n      name: 'In-memory',\n      store: 'memory',\n    },\n  });\n"],"names":["getDockerImageForName"],"mappings":";;;;AAwCa,MAAA,SAAA,GACX,OAAO,MAAO,CAAA;AAAA,EACZ,OAAS,EAAA;AAAA,IACP,IAAM,EAAA,WAAA;AAAA,IACN,KAAO,EAAA,OAAA;AAAA,IACP,eAAA,EAAiBA,4CAAsB,SAAS,CAAA;AAAA,IAChD,uCACE,EAAA,+CAAA;AAAA,GACJ;AAAA,EACA,WAAa,EAAA;AAAA,IACX,IAAM,EAAA,eAAA;AAAA,IACN,KAAO,EAAA,UAAA;AAAA,IACP,eAAA,EAAiBA,4CAAsB,aAAa,CAAA;AAAA,IACpD,uCACE,EAAA,mDAAA;AAAA,GACJ;AAAA,EACA,MAAQ,EAAA;AAAA,IACN,IAAM,EAAA,WAAA;AAAA,IACN,KAAO,EAAA,QAAA;AAAA,GACT;AACF,CAAC;;;;"}