'use strict';

var webpack = require('webpack');
var config = require('./config.cjs.js');
var paths = require('./paths.cjs.js');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e : { default: e }; }

var webpack__default = /*#__PURE__*/_interopDefaultCompat(webpack);

async function serveBackend(options) {
  const paths$1 = paths.resolveBundlingPaths(options);
  const config$1 = await config.createBackendConfig(paths$1, {
    ...options,
    isDev: true
  });
  process.env.NODE_ENV = "development";
  const compiler = webpack__default.default(config$1, (err) => {
    if (err) {
      console.error(err);
    } else console.log("Build succeeded");
  });
  const waitForExit = async () => {
    for (const signal of ["SIGINT", "SIGTERM"]) {
      process.on(signal, () => {
        compiler.close(() => process.exit());
      });
    }
    return new Promise(() => {
    });
  };
  return waitForExit;
}

exports.serveBackend = serveBackend;
//# sourceMappingURL=backend.cjs.js.map
